<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>系统部署说明</title>
</head>
<body>
    <h1>系统使用说明</h1>
    <ol>
        <li>
            <h2>系统配置</h2>
            <p>系统有两个配置文件： /config.php 和 /dbConf.php 前者是系统配置文件，后者是数据库配置文件。</p>
            <p>config.php 可以指定是否处于调试模式。网站根目录，网站rootURL，每页显示条数等。其中网站根目录和网站rootURL是必须配置的。</p>
            <p>dbConf.php 里配置了数据用户名，密码等，目前使用的是mysql的test数据库。</p>
        </li>
        <li>
            <h2>数据库</h2>
            <p>数据库文件在 /docs/db/ 目录下，reset_table_***.sql 是重置表的语句。 testdata_*.sql 是插入测试数据的语句。</p>
            <p>update_sql.sh  是一个用来生成文件 reset_all_table.sql 和 all_testdata.sql 的脚本，执行 sh update_sql.sh 即可。</p>
            <p>建表和插入测试数据时，只需在数据库里 source reset_all_table.sql 即可重置表结构，source all_testdata.sql即可插入测试数据。</p>
            <p>使用MySQL数据库。</p>
        </li>
        <li>
            <h2>部署注意事项</h2>
            <p>前台和后台共用/lib/目录和/目录下的配置文件。</p>
            <p>前台的页面文件在/public/目录下，后台的页面文件在/admin/目录下，建议将前台和后台的域名分别指向这两个目录。</p>
            <p>部署时请注意，务必要根据自己的部署环境调整/config.php 中的:</p>
            <ul>
                    <li>// 本地主机名称</li>
                    <li>$_cfg_hostName = 'gh';</li>
                    <li></li>
                    <li>// 服务器上的网站根目录</li>
                    <li>$_cfg_webRoot = "/var/www/proj/gh/public/";</li>
                    <li>$_cfg_webRootAdmin = "/var/www/proj/gh/admin/";</li>
                    <li></li>
                    <li>// 网站的http根目录</li>
                    <li>$_cfg_siteRoot = "http://gh/";</li>
                    <li>$_cfg_siteRootAdmin = "http://gha/";</li>
            </ul>
        </li>
        <li>
            <h2>关于文件上传</h2>
            <p>目前系统是将上传的文件直接放到了web目录下。(参见 config.php/ $_cfg_img_path*)</p>
            <p>如果需要将文件上传到CDN或其他位置，请修改 lib/common.php 中的 deal_upload_image() 方法。该方法接受一个PHP中的 $_FILES[n]参数，对上传文件进行处理，然后返回一个系统可用的图片URL片段(结合 config.php中的 $_cfg_img_path* 配置)。</p>
            <p></p>
        </li>
        <li>
            <h2>前台页面</h2>
            <ol>
                <li>首页 index.php</li>
                <li>房产详情页 house.php</li>
                <li>房产列表页 house_list.php</li>
                <li>文章详情页 article.php</li>
                <li>文章列表也 article_list.php</li>
            </ol>
        </li>
        <li>
            <h2>后台管理功能</h2>
            <ol>
                <li>
                    <p>后台测试帐号： test00/00test 。00 到05 都可以用。如 test03/03test。</p>
                </li>
            </ol>
        </li>
    </ol>
</body>
</html>
